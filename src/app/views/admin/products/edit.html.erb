<div class="flex flex-col items-center pt-10 antialiased">
  <div class="flex w-full flex-col space-y-4 py-4 md:w-4/5 lg:w-1/3">
    <h1 class="py-2 text-center text-2xl font-bold md:text-start md:text-4xl">
      商品情報の編集
    </h1>
    <%= form_with model: [:admin, @product], class: 'space-y-4 rounded-xl border border-gray-200 bg-white p-4 shadow-xl', multipart: true do |form| %>
      <div class="flex flex-col">
        <%= form.label :name, "名前", class: 'font-bold' %>
        <%= form.text_field :name, class: 'rounded border border-gray-300 p-2 focus:ring focus:ring-blue-500' %>
        <% @product.errors.full_messages_for(:name).each do |message| %>
          <div class="text-red-500 text-sm mt-1 bg-red-100 p-2 rounded-md"><%= message %></div>
        <% end %>
      </div>
      <div class="flex flex-col">
        <%= form.label :description, "説明", class: 'font-bold' %>
        <%= form.text_area :description, class: 'rounded border border-gray-300 p-2 focus:ring focus:ring-blue-500' %>
        <% @product.errors.full_messages_for(:description).each do |message| %>
          <div class="text-red-500 text-sm mt-1 bg-red-100 p-2 rounded-md"><%= message %></div>
        <% end %>
      </div>
      <div class="space-y-4">
        <label for="product-images" class="font-bold">画像</label>
        <!-- 商品画像 -->
        <% if @product.images.attached? %>
          <% image = @product.images.first %>
          <% if image.persisted? && image.content_type.in?(%w[image/png image/jpg image/jpeg]) && image.byte_size <= 5.megabyte %>
            <%= image_tag image.variant(resize_to_fill: [127, 73]), class: 'block rounded-lg shadow-xl' %>
          <% else %>
            <%= image_tag 'sample_image.jpg', class: 'block rounded-lg shadow-xl', size: "127x73" %>
          <% end %>
        <% else %>
          <%= image_tag 'sample_image.jpg', class: 'block rounded-lg shadow-xl', size: "127x73" %>
        <% end %>
        <%= form.file_field :images, multiple: true, class: 'block cursor-pointer rounded-lg border border-gray-300 bg-gray-50 text-sm text-gray-900 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:placeholder-gray-400' %>
        <% @product.errors.full_messages_for(:images).each do |message| %>
          <div class="text-red-500 text-sm mt-1 bg-red-100 p-2 rounded-md"><%= message %></div>
        <% end %>
      </div>
      <div class="flex flex-col">
        <%= form.label '作者', class: 'font-bold' %>
        <%= form.text_field :creator, class: 'rounded border border-gray-300 p-2 focus:ring focus:ring-blue-500' %>
      </div>
      <div class="flex flex-col">
        <%= form.label 'カテゴリー', class: 'font-bold' %>
        <%= form.select :product_category_id, options_for_select(@categories.map { |c| [c.name, c.id] }, @product.product_category_id), {}, { class: 'block rounded-lg border border-gray-300 bg-gray-200 p-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500' } %>
      </div>
      <div class="w-full space-y-3">
        <div class="flex flex-col">
          <%= form.label '在庫数', class: 'font-bold' %>
          <%= form.number_field :stock, class: 'rounded border border-gray-300 p-2 focus:ring focus:ring-blue-500' %>
        </div>
        <div class="flex flex-col">
          <%= form.label :price, "価格", class: 'font-bold' %>
          <%= form.number_field :price, class: 'rounded border border-gray-300 p-2 focus:ring focus:ring-blue-500' %>
        </div>
      </div>
      <div class="flex flex-col">
        <%= form.label :status, "ステータス", class: 'font-bold' %>
        <%= form.select :status, Product.statuses.keys.map { |s| [I18n.t("products.status.#{s}"), s] }, {}, { class: 'block rounded-lg border border-gray-300 bg-gray-200 p-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500' } %>
      </div>
      <div class="flex justify-between">
        <%= link_to 'キャンセル', admin_products_path, class: 'text-center my-2 w-1/4 rounded-lg border border-gray-300 bg-white py-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700' %>
        <%= form.submit '保存する', class: 'my-2 w-1/4 rounded bg-yellow-400 py-2 hover:bg-yellow-500 hover:cursor-pointer' %>
      </div>
    <% end %>
  </div>
</div>
